---
type: mechanic
system: world_topology
tags: [layout, sockets, graph]
related_files:
  - "05_Generation_Pipeline"
---

# Топология Мира: Паттерн "Цветок"

## 1. Иерархия Генерации
Мир строится от Центра к периферии, используя систему "Якорей" (Anchors) для сохранения логики путей.

1.  **Центр (The Core):** Абсолютный нуль `(0,0,0)`. Имеет фиксированные Мастер-Сокеты.
2.  **Порт (The Stem):** "Позвоночник" локации. Генерируется первым. Соединяет Центр и точку выхода ("Дверь").
3.  **Лепестки (Petals):** Процедурные районы (Промзона, Трущобы), которые пристыковываются к боковым сокетам Порта.

## 2. Система Сокетов (Socket System)
Для бесшовности используется система "Папа-Мама" с проверкой контекста.
* **Данные сокета:** Позиция, Направление (Вектор), ID Профиля (Широкая дорога / Переулок / Канализация).
* **Правило "Защелки":** Префаб Сектора Б подходит к Сектору А только если `Profile ID` совпадает, а вектор направления инвертирован.

## 3. Вайп и Пересборка
* **Вайп Лепестка:** Просто заменяется новым, подстраиваясь под границы Cоседей.