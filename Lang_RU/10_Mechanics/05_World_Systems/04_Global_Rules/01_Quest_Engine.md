---
type: mechanic
system: quest_engine
tags: [contracts, ui, reputation, time_limit, map_markers]
related_files:
  - "[[Lang_RU/10_Mechanics/03_Economy/10_Reputation_Rules|Reputation_Rules]]"
  - "[[Lang_RU/10_Mechanics/05_World_Systems/01_Hub/01_Hub_Map_Table|Hub_Map_Table]]"
  - "[[Lang_RU/10_Mechanics/05_World_Systems/02_Generation/07_Server_Lifecycle|Server_Lifecycle]]"
---

# Движок Квестов: Система Контрактов

## 1. Философия: Работа, а не Героизм
В Элдрейне нет "Спасения Мира". Есть **Заказы (Contracts)**.
Игрок выступает в роли подрядчика. Квесты — это единственный легальный способ получить технологии фракций и доступ к закрытым лифтам.

---

## 2. Визуализация: Интерактивный Стол
Квесты не берутся у NPC с восклицательными знаками над головой. Весь менеджмент происходит на **Стратегической Карте Хаба**.

### Маркеры Задач (The Pins)
На 3D-макете города появляются цветные булавки (Pins) или флажки, обозначающие доступные контракты в конкретных районах.

1.  **Желтый Маркер (Campaign / Static):**
    * *Суть:* Сюжетные миссии или обучение.
    * *Стабильность:* Не исчезают со временем. Висят, пока игрок их не выполнит.
    * *Пример:* "Установить первый маяк для Картографов".

2.  **Белый Маркер (Daily / Procedural):**
    * *Суть:* Рутинные задачи фракций (Убить, Принести, Разведать).
    * *Ротация:* Обновляются раз в 24 часа.

3.  **Красный Пульсирующий Маркер (Urgent / Phase-Limited):**
    * *Суть:* Критические задачи, привязанные к текущему циклу сервера.
    * *Таймер:* Исчезают при смене Фазы (через 2 часа) или при Коллапсе сервера.

---

## 3. Типология и Таймеры (Time Constraints)

Система делит задачи на три категории по "Сроку Жизни" (TTL - Time To Live), жестко привязанному к **Жизненному Циклу Сервера**.

### Type A: Глобальные (Permanent)
* **Контекст:** Прогресс аккаунта (Личная история Бригадира).
* **Срок:** Бессрочно.
* **Провал:** Невозможен (можно перепробовать в следующем рейде).
* **Награда:** Чертежи, доступ к слотам Схрона, сюжетные предметы.

### Type B: Сессионные (Session Bound)
* **Контекст:** Задача на одну высадку.
* **Срок:** До выхода из рейда (Extraction) или смерти.
* **Условие:** "Вынести образец вируса из Лаборатории".
* **Провал:** Если умер с квестовым предметом — предмет теряется, квест сбрасывается. Нужно искать заново в следующем рейде.

### Type C: Фазовые (Phase Linked)
* **Контекст:** Динамические события мира.
* **Срок:** Строго до конца текущей фазы сервера (например, 02:00 -> 04:00).
* **Механика:**
    * Если наступила следующая Фаза (Tier Shift), а контракт не сдан — он считается **Проваленным**.
    * *Пример:* "Перехватить курьера до начала Шторма". Шторм начался (Tier 3) — курьер мертв, задача отменена.

---

## 4. Репутация и "Игра с Нулевой Суммой"
Выполнение контрактов напрямую влияет на положение в системе **Faction Reputation**.

### Принцип "Услуга за Услугу"
Большинство процедурных квестов имеют двойной эффект:
1.  **Target:** Вы выполняете заказ для **Фракции А** (+Репутация).
2.  **Victim:** Заказ обычно направлен против **Фракции Б** (шпионаж, саботаж, устранение).
    * **Результат:** Вы получаете `+50 Rep` у Заказчика и автоматически `-25 Rep` у Жертвы.

### Фракционные Цепочки (Chain Unlock)
* **Tier 1 (Neutral):** Доступны только простые задачи "Принеси мусор".
* **Tier 2 (Partner):** Открываются сложные боевые контракты (Assassination) с высокими наградами (Валюта + Редкие модули).
* **Tier 3 (Agent):** Элитные миссии ("Рейд в Цитадель врага"). Выполнение таких миссий дает максимальную награду, но делает вас `Hated` (Врагом) для противоположной фракции.

---

## 5. Генерация Задач (Contextual Generation)
Движок квестов анализирует инвентарь и статистику игрока, чтобы выдавать релевантные задачи (Smart RNG).

* **Need for Greed:** Если у игрока на складе много оружия без патронов -> Система сгенерирует квест на "Зачистку склада боеприпасов".
* **Recovery:** Если игрок потерял дорогое снаряжение в прошлом рейде -> Может появиться квест от "Мусорщиков": *"Мы нашли твой труп. Выкупи координаты или выполни для нас грязную работу, и мы вернем страховку".*