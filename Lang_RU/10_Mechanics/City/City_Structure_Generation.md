---
type: mechanic
system: city
tags:
  - generation
  - hex_grid
  - rotation
related_lore:
  - "[[20_Lore/Places/City_Districts|Архитектура Элдрейна]]"
---

# Система: Структура и Генерация (Hex & Tags)

## 1. Гексагональная Сетка (The Grid)
Город построен не по квартальной, а по гексагональной сетке.
* **Ячейка:** 1 Гекс = Базовая единица пространства.
* **Здания:** Могут занимать 1, 3 или 7 гексов (Multi-hex structures).
* **Дороги:** Процедурно соединяют точки привязки (Snap Points) между гексами.

## 2. Распределение Построек (Spawn Rates)
При генерации квартала соблюдается баланс контента:

| Тип Здания | Шанс | Описание |
| :--- | :--- | :--- |
| **Обычные** | 55% | Жилые дома, руины. Лут: Мусор, Ресурсы. |
| **Квестовые** | 23% | Здания с записками, следами, сюжетными NPC. |
| **Уникальные** | 22% | Банки, Оружейные, Лаборатории. Лут: Артефакты. |

## 3. Генерация через Теги (Tag Logic)
Здания собираются процедурно на основе "Тегов Мебели".
* **Принцип:** Система сначала выбирает Теги, потом Здание.
    * *Логика:* `[Tag: Med_Bed]` + `[Tag: Equipment]` = Генератор создает "Больницу".
    * *Логика:* `[Tag: Safe]` + `[Tag: Weapon_Rack]` = Генератор создает "Полицейский участок".

## 4. Алгоритм Ротации (District Cycle)
* **Пул:** 10 Кварталов всего (6 Активных + 4 Резерв).
* **Триггер Замены:** Истощение (кол-во успешных вылазок игроков).
* **Коэффициенты Обновления:**
    * *Коэф. Неизменности:* Чем дольше зона не менялась, тем выше шанс **Полного Изменения** (замена всего квартала).
    * *Коэф. Присутствия:* Чем дольше здание не спавнилось, тем выше шанс его появления при **Точечном Изменении**.