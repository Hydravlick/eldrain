---
type: mechanic
system: trade_craft
tags: [barter, crafting, core, tax]
related_files:
  - "[[Lang_RU/10_Mechanics/03_Economy_Resources/00_Overview/00_Economy_Core|Economy_Core]]"
  - "[[Lang_RU/10_Mechanics/03_Economy_Resources/01_Currency_System/01_Currency_Rez|Currency_Rez]]"
  - "[[Lang_RU/10_Mechanics/03_Economy_Resources/03_Trade_Crafting/04_Craft_Modifiers|Craft_Modifiers]]"
---

# Система Бартера и Заказа (Unified Trade)

## 1. Отказ от "Купи-Продай"
В Элдрейне нет классического магазина, где можно продать 100 крысиных хвостов за золото. Экономика построена на **Заказе (Commission)**.
* **Игрок:** Приносит ресурсы (металлолом, ткани, чертежи).
* **Торговец:** Предоставляет услугу сборки/обмена.
* **Валюта:** Рез выступает лишь как катализатор сделки и оплата труда Мастера.

## 2. Формула Сделки (The Recipe)
Технически, любая операция (крафт на верстаке или покупка у вендора) использует единый класс `RecipeTransaction`.

$$[Inputs] + [Blueprint] + [Catalyst\_Rez] \xrightarrow{Time} [Output]$$

### Компоненты:
1.  **Inputs:** Список ресурсов-ингредиентов.
2.  **Blueprint:** (Опционально) Предмет знания/лицензии (см. `Blueprints`).
3.  **Catalyst:** Валюта (Рез), которая сгорает в процессе.
4.  **Decorators:** (Опционально) Слоты для модификаторов качества (см. `Craft_Modifiers`).

## 3. Валидация (Transaction Check)
Перед нажатием кнопки "Сделка" система проверяет:
1.  **Currency:** Хватает ли Реза (Inventory + Stash)?
2.  **Items:** Хватает ли ингредиентов?
3.  **Space:** Есть ли свободное место в инвентаре для `Output`? (Учитывая сетку инвентаря).

## 4. Налог Энтропии (The Tax)
Каждая операция обмена облагается налогом, который выводится из игры.
* **Базовая ставка:** 10-15% от оценочной стоимости предмета.
* **Динамика:** Враждебная фракция может выставить налог 500% (санкции), а высокая репутация снижает его до 0%.